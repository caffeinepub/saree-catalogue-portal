{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Deploy Weaver Catalog to Internet Computer Canister",
  "requirements": [
    {
      "id": "REQ-1",
      "summary": "Configure dfx.json with proper canister definitions for both backend (Motoko) and frontend (React) canisters with appropriate build settings",
      "acceptanceCriteria": [
        "dfx.json exists in project root with backend and frontend canister configurations",
        "Backend canister specifies main.mo as the main file",
        "Frontend canister is configured as an asset canister with proper source directory",
        "Network configurations include local and ic (mainnet) settings"
      ],
      "file_operations": [
        {
          "path": "dfx.json",
          "operation": "create",
          "description": "Create dfx.json configuration file in project root with backend canister pointing to backend/main.mo and frontend canister configured as an asset canister with source directory set to frontend/dist. Include network configurations for both local and ic (mainnet) environments with proper URLs and canister settings."
        }
      ]
    },
    {
      "id": "REQ-2",
      "summary": "Ensure frontend build process generates proper Candid declarations and environment variables for canister IDs",
      "acceptanceCriteria": [
        "Vite build configuration includes plugins for Candid declaration generation",
        "Environment variables for canister IDs are properly injected during build",
        "Frontend can successfully import and use backend declarations"
      ],
      "file_operations": [
        {
          "path": "frontend/vite.config.ts",
          "operation": "modify",
          "description": "Update Vite configuration to include environment variable handling for canister IDs (VITE_BACKEND_CANISTER_ID, VITE_DFX_NETWORK) and ensure the build process supports IC deployment requirements. Configure environment variable injection for both local and mainnet deployments."
        },
        {
          "path": "frontend/.env.example",
          "operation": "modify",
          "description": "Update environment variable template to include all necessary canister ID variables (VITE_BACKEND_CANISTER_ID, VITE_FRONTEND_CANISTER_ID, VITE_DFX_NETWORK) with clear comments explaining they are populated by dfx during deployment for both local and mainnet environments."
        },
        {
          "path": "frontend/src/hooks/useActor.ts",
          "operation": "modify",
          "description": "Verify that the actor initialization correctly reads canister IDs from environment variables (import.meta.env.VITE_BACKEND_CANISTER_ID) and uses the appropriate network configuration. Ensure compatibility with IC deployment where canister IDs are dynamically injected during the build process."
        }
      ]
    },
    {
      "id": "REQ-4",
      "summary": "Remove GitHub Pages deployment configuration including .github/workflows/deploy.yml and frontend/public/.nojekyll files",
      "acceptanceCriteria": [
        ".github/workflows/deploy.yml is removed from the project",
        "frontend/public/.nojekyll is removed from the project",
        "No references to GitHub Pages remain in configuration files"
      ],
      "file_operations": [
        {
          "path": ".github/workflows/deploy.yml",
          "operation": "delete",
          "description": "Remove GitHub Pages deployment workflow configuration file as the application will be deployed to Internet Computer canisters instead."
        },
        {
          "path": "frontend/public/.nojekyll",
          "operation": "delete",
          "description": "Remove Jekyll bypass file that was used for GitHub Pages deployment, no longer needed for IC canister deployment."
        }
      ]
    },
    {
      "id": "REQ-5",
      "summary": "Update frontend routing and asset paths to work correctly within IC canister environment using relative paths",
      "acceptanceCriteria": [
        "Vite base configuration is set to './' for relative path support",
        "All asset imports use relative paths compatible with IC asset canister",
        "Router configuration works with canister URL structure",
        "Static assets load correctly when deployed to IC"
      ],
      "file_operations": [
        {
          "path": "frontend/vite.config.ts",
          "operation": "modify",
          "description": "Set Vite base configuration to './' to enable relative path support for IC asset canister deployment. Ensure build output is configured for frontend/dist directory and that asset paths are resolved correctly for canister environment."
        },
        {
          "path": "frontend/src/App.tsx",
          "operation": "modify",
          "description": "Verify router configuration is compatible with IC canister URL structure using relative paths. Ensure all route definitions work correctly when the application is served from a canister subdomain and that navigation functions properly in the IC environment."
        },
        {
          "path": "frontend/index.html",
          "operation": "modify",
          "description": "Update base HTML template to ensure script and asset references use relative paths compatible with IC asset canister serving. Verify the root div and module script reference work correctly when deployed to IC."
        },
        {
          "path": "frontend/src/pages/HomePage.tsx",
          "operation": "modify",
          "description": "Update references to generated assets to use relative paths. Specifically, ensure the hero image at frontend/public/assets/generated/weaving-hero.dim_1200x600.png is referenced using a path compatible with IC asset canister serving (e.g., './assets/generated/weaving-hero.dim_1200x600.png' or '/assets/generated/weaving-hero.dim_1200x600.png')."
        },
        {
          "path": "frontend/src/components/FeatureSection.tsx",
          "operation": "modify",
          "description": "Update references to generated feature icons to use relative paths compatible with IC asset canister. Ensure catalog-icon.dim_64x64.png and customers-icon.dim_64x64.png at frontend/public/assets/generated/ are referenced correctly for canister deployment."
        }
      ]
    }
  ]
}